# Profy ピアノ演奏データセット 詳細ドキュメント

## 📊 データセット概要

**Profy Piano Performance Dataset** は、ピアノ演奏の包括的な分析を目的とした最先端のマルチモーダルデータセットです。このデータセットは、ピアノ学習者の演奏技術向上、音楽教育システムの開発、人間の動作解析研究、機械学習による演奏評価システムの構築など、幅広い研究・開発用途に活用できるよう設計されています。

### 🎯 主要特徴
- **大規模**: 2,433の演奏セッション、544の完全データセット
- **マルチモーダル**: 音声、映像、センサー、動作データを統合
- **高解像度**: 1,000Hz（1ミリ秒間隔）の時系列データ
- **詳細な注釈**: 自動・手動両方による多層的評価
- **時間同期**: 全モダリティが正確に同期済み

---

## 📁 データ構造と構成

### 🗂️ ディレクトリ構造

```
data/
├── 📦 2024skillcheck_playdata.tar.xz           # メインアーカイブ（展開済み）
├── 📊 2024skillcheck_scale_arpeggio_unrefined_raw.csv  # 評価指標データ
├── 📋 all_answer_summary_df.csv                # 人間による評価サマリー  
├── 🗜️ data.zip                                 # 元の圧縮ファイル
└── 📁 playdata/                               # 演奏データ本体
    ├── 📁 [セッションID]/                      # 各演奏セッション（2,433個）
    │   ├── 📄 meta.json                       # セッションメタデータ
    │   └── 📁 files/                          # データファイル群
    │       ├── 📁 hackkey/                    # ピアノキーセンサーデータ
    │       │   ├── 📈 hackkey.csv            # 時系列センサーデータ
    │       │   └── 🎵 note.json              # 音符レベル解析データ
    │       ├── 📁 sound/                      # 音声データ群
    │       │   ├── 🎤 sound_raw.wav          # 生音声
    │       │   ├── 🎵 sound_x1.mp3           # 通常速度音声
    │       │   ├── 🐌 sound_x05.mp3          # 0.5倍速音声
    │       │   ├── 🐌 sound_x025.mp3         # 0.25倍速音声
    │       │   └── 🐌 sound_x0125.mp3        # 0.125倍速音声
    │       ├── 📁 movie0-3/                   # 4カメラ映像データ
    │       │   ├── 🎬 movie_raw.mp4          # 元映像
    │       │   ├── 📺 movie_1080p.mp4        # 1080p映像
    │       │   ├── 📺 movie_720p.mp4         # 720p映像
    │       │   └── 📱 movie_480p.mp4         # 480p映像
    │       ├── 📁 body_posture/               # 身体姿勢データ
    │       │   ├── 🦴 skeleton.csv           # 骨格トラッキング
    │       │   └── 🧍 body_posture.json      # 姿勢解析
    │       └── 📁 pedal/                      # ペダルセンサーデータ
    └── ...
```

---

## 📊 データファイル詳細解説

### 🎼 1. 演奏評価指標データ (`2024skillcheck_scale_arpeggio_unrefined_raw.csv`)

このCSVファイルは、各演奏セッションに対する包括的な技術・音楽的評価指標を含んでいます。

#### 📋 基本情報フィールド
| フィールド | 説明 | 例 |
|------------|------|-----|
| `performance_id` | 演奏評価ID | `672471d1fe997a58964f8fa4` |
| `playdata_id` | 演奏データID | `672471d1fe997a58964f8f97` |
| `player_id` | 演奏者ID | `6035d4454e2350c1a5f152b6` |
| `piecetask_name` | 楽曲名 | `Scale C-dur`, `Arpeggio fis-moll` |
| `recorded_at` | 録音日時 | `2024-11-01T06:14:39.302Z` |
| `nthTake` | テイク番号 | `1`, `2`, `3` |
| `isAdopted` | 採用可否 | `True`/`False` |

#### 🎵 音楽的評価指標 (左手/右手/両手別)
| 指標カテゴリ | フィールド例 | 説明 | 値域 |
|-------------|-------------|------|------|
| **音量** | `loudness/left`, `loudness/right`, `loudness/both` | 演奏の音量レベル | 0-20 |
| **レガート** | `legato/left`, `legato/right`, `legato/both` | 音符間の滑らかさ | 0-25 |
| **リズム** | `rhythm/left`, `rhythm/right`, `rhythm/both` | リズムの正確性 | 0-15 |
| **音価** | `note_value/left`, `note_value/right`, `note_value/both` | 音符の長さの正確性 | 0-20 |
| **音価フーリエ** | `note_value_fourier/left`, etc. | 周波数領域での音価解析 | 0-20 |
| **テンポ** | `tempo/left`, `tempo/right`, `tempo/both` | テンポの安定性 | -5 to 15 |
| **左右リズム** | `lr_rhythm/both` | 左右手のリズム同期性 | -5 to 5 |

#### 🏃‍♂️ 身体動作・技術評価指標
| 指標 | 説明 | 判定基準 |
|------|------|----------|
| `Nekoze` | 猫背の検出度合い | 0-50 (数値が大きいほど猫背) |
| `Head_shake` | 頭の揺れ | 0-20 (数値が大きいほど不安定) |
| `hackkey_vel_non-monotonic` | キータッチ速度の変化 | 50,000-200,000 |
| `not_forte_enough` | フォルテの不足度 | 0-1 (1に近いほど不足) |

#### 🖐️ 指技巧評価（指くぐり・指またぎ）
各技術について左手(L)・右手(R)別に以下4つの指標があります：

**指くぐり技術** (`yubikuguri_*`)
- `premotion_fail_std_L/raw`: 左手指くぐり失敗の標準偏差
- `premotion_fail_mean_L/raw`: 左手指くぐり失敗の平均値
- `found_mistake`: ミスの検出フラグ (`True`/`False`)

**指またぎ技術** (`yubimatagi_*`)
- 同様の構造で右手・左手の指またぎ技術を評価

#### 📈 データ例（簡略版）
```csv
piecetask_name,loudness/both,legato/both,rhythm/both,Nekoze,Head_shake
Scale C-dur,4.77,17.32,6.72,27.22,3.41
Scale Ges-dur,5.41,19.95,8.13,26.44,6.40
Scale fis-moll,5.33,17.51,6.14,24.13,4.25
```

### 👥 2. 人間による評価サマリーデータ (`all_answer_summary_df.csv`)

このファイルには、人間の評価者による主観的評価データが含まれています。

#### 📋 フィールド説明
| フィールド | 説明 | 値の例 |
|------------|------|--------|
| `user_id` | 評価者ID | `67b492caabcc8fb007802d42` |
| `playdata_id` | 演奏データID | `675fab3090d7d6419fa48da8` |
| `updated_at` | 評価更新日時 | `2025-02-19T04:06:39.531838Z` |
| `is_answered` | 評価完了フラグ | `True`/`False` |
| `score1` | 第1評価スコア | `1-6点` |
| `score2` | 第2評価スコア | `1-6点` |
| `player_tag` | 演奏者レベル | `amateur`, `pro` |
| `preparation` | 準備状況 | 自由記述テキスト |

#### 📊 評価スコア体系
- **スコア範囲**: 1-6点（6点が最高評価）
- **評価観点**: 
  - `score1`: 技術的正確性（リズム、音価、指使い等）
  - `score2`: 音楽的表現力（強弱、フレージング等）
- **演奏者分類**:
  - `amateur`: アマチュア演奏者
  - `pro`: プロフェッショナル演奏者

#### 📈 データ例
```csv
user_id,playdata_id,score1,score2,player_tag,piecetask_name
67b492ca...,675fab30...,1,2.0,amateur,Scale Des-dur
67b492ca...,675fabf5...,2,1.0,amateur,Scale b-moll
67b492ca...,677c87ee...,5,4.0,pro,Scale Es-dur
```

### 🎹 3. マルチモーダル演奏データ (`playdata/`)

最も重要なデータセット部分で、**544個の完全な演奏セッション**が含まれています（全2,433ディレクトリ中）。

#### 📊 データ規模
- **完全データセット**: 544セッション
- **各セッション平均時間**: 5-15秒
- **データサイズ**: 数GB（AWS S3と同期）
- **時間解像度**: 1,000Hz（1ミリ秒間隔）

#### 🎤 音声データ群
| ファイル | 説明 | 用途 |
|----------|------|------|
| `sound_raw.wav` | 生音声（WAV形式） | 高品質音響解析 |
| `sound_x1.mp3` | 通常速度音声 | 一般的な再生・解析 |
| `sound_x05.mp3` | 0.5倍速音声 | 詳細なタイミング解析 |
| `sound_x025.mp3` | 0.25倍速音声 | 超精密解析 |
| `sound_x0125.mp3` | 0.125倍速音声 | 最高精度解析 |
| `waveform.json` | 波形解析データ | 可視化・特徴抽出 |

#### 📹 4カメラ映像データ
各セッションに最大4つのカメラアングル（`movie0`-`movie3`）:

| 解像度 | ファイル形式 | 用途 |
|--------|-------------|------|
| `movie_raw.mp4` | 元解像度 | 最高品質解析 |
| `movie_1080p.mp4` | 1920×1080 | 高品質解析 |
| `movie_720p.mp4` | 1280×720 | 標準解析 |
| `movie_480p.mp4` | 854×480 | 軽量解析・プレビュー |
| `thumbnail.png` | サムネイル画像 | 可視化・インデックス |
| `landmark.json` | 画像特徴点データ | 手・指の動作解析 |

#### ⌨️ ピアノセンサーデータ
| データ種別 | ファイル | 詳細 |
|------------|----------|------|
| **キーセンサー** | `hackkey.csv` | 88鍵×1000Hz時系列データ |
| **音符解析** | `note.json` | 個別音符の詳細解析 |
| **フレーズ** | `phrase.json` | 音楽フレーズ構造 |
| **和音** | `chord.json` | 和音進行解析 |
| **特徴量** | `feature.json` | 音楽的特徴量 |
| **MIDI** | `midi.mid` | MIDI形式データ |

#### 🦴 身体動作データ
| データ種別 | ファイル | 内容 |
|------------|----------|------|
| **骨格トラッキング** | `skeleton.csv` | 全身骨格座標（時系列） |
| **身体姿勢** | `body_posture.json` | 姿勢評価・分類 |
| **身体バランス** | `body_balance.json` | 重心・バランス解析 |
| **手の姿勢** | `hands_posture.json` | 手指の詳細動作 |

#### 🎵 ペダルセンサーデータ
| ファイル | 内容 |
|----------|------|
| `pedal.json` | ペダル操作の時系列データ |

---

## 🔍 詳細データ形式とスキーマ

### 📄 A. セッションメタデータ (`meta.json`)

各演奏セッションの包括的なメタデータとファイル参照情報を含みます。

#### 📋 主要フィールド
```json
{
  "_id": "672471d1fe997a58964f8f97",                    // セッション固有ID
  "name": "20241101-15-14-40_Scale C-dur_Take1",       // セッション名
  "length": 9.050361,                                  // 演奏時間（秒）
  "recorded_at": "2024-11-01T06:14:34.097Z",          // 録音日時
  "piece_task": "65d2c41dd98f2c2f0adfd890",           // 課題楽曲ID
  "files": {
    "sound": {
      "sound_raw": {
        "file": "https://s3.amazonaws.com/...",         // AWS S3 URL
        "local_path": "files/sound/sound_raw.wav"       // ローカルパス
      }
    }
  }
}
```

#### 🔗 ファイル参照システム
- **クラウド**: AWS S3での暗号化ストレージ
- **ローカル**: 相対パス参照
- **MIME Type**: 適切な形式指定
- **バージョニング**: スクリプトバージョン追跡

### ⌨️ B. ピアノセンサーデータ (`hackkey.csv`)

**88鍵盤ピアノの時系列センサーデータ**

#### 📊 データ形式
- **列数**: 89列（タイムスタンプ + 88鍵）
- **行数**: 約10,000-16,000行/セッション
- **サンプリング**: 1000Hz（1ミリ秒間隔）
- **値域**: -0.08 ～ 0.05（キー押下深度）

#### 🎹 鍵盤マッピング
```
列1: タイムスタンプ（秒）
列2-89: ピアノ鍵盤A0-C8（88鍵）の押下深度
```

#### 📈 データ例（簡略版）
```csv
時刻,A0,A#0,B0,C1,C#1,...,A7,A#7,B7,C8
0.000999,-0.044,0.001,-0.013,-0.028,...,0.021,0.017,0.011,0.005
0.001999,-0.048,0.000,-0.013,-0.026,...,0.021,0.017,0.011,0.004
```

#### 🔬 物理的意味
- **正値**: キーが下方向に押された状態
- **負値**: キーが上方向（通常位置より上）
- **0**: キーが基準位置
- **値の大きさ**: 押下の強度/深度を表現

### 🎵 C. 音符解析データ (`note.json`)

**個別音符レベルでの詳細なキネマティクス解析**

#### 📊 データ構造
```json
{
  "note": [
    {
      "id": 0,                           // 音符ID
      "key": 15,                         // MIDIキー番号（C1=12, C4=60）
      "onset": 470,                      // 音符開始時刻（ミリ秒）
      "offset": 649,                     // 音符終了時刻（ミリ秒）
      "finger": 4,                       // 使用指番号（1:親指-5:小指）
      
      // キネマティクス解析
      "max_depth": -0.045,              // 最大押下深度
      "pressing_duration": 179,          // 押下持続時間（ms）
      
      // 動的特性
      "peak_vel_des": 364.58,           // 下降時最大速度
      "peak_vel_asc": 236.49,           // 上昇時最大速度
      "peak_acc_des": 126299.99,        // 下降時最大加速度
      "peak_acc_asc": 121699.99,        // 上昇時最大加速度
      
      // タイミング解析
      "bottom_timing": 0.0,             // 最下点到達時刻
      "release_timing": 0.169,          // リリース開始時刻
      "escapement_timing": 0.045,       // エスケープメント時刻
      
      // 時系列データ（179サンプル）
      "data": [0.0, -0.001, ...],       // キー位置の時系列
      "vel": [0.0, -1.23, ...],         // 速度の時系列
      "acc": [0.0, -1234.5, ...]        // 加速度の時系列
    }
  ]
}
```

#### 🎼 音符特徴量の意味
| 特徴量 | 説明 | 演奏技術との関係 |
|--------|------|------------------|
| `peak_vel_des` | 下降時最大速度 | アタックの強さ |
| `escapement_timing` | エスケープメント | タッチの精度 |
| `max_depth` | 最大押下深度 | 音量・表現力 |
| `pressing_duration` | 押下持続時間 | レガート・スタッカート |
| `finger` | 指番号 | 運指法・技巧 |

---

## 📊 データセット統計情報

### 📈 収録概要
- **収録期間**: 2024年11月〜2025年1月（3ヶ月間）
- **総セッション数**: 2,433セッション
- **完全データ**: 544セッション（22.3%）
- **総録音時間**: 約2-3時間
- **平均セッション時間**: 5-15秒

### 🎼 楽曲分布
| 楽曲タイプ | 例 | セッション数 |
|------------|-----|--------------|
| **スケール** | C-dur, Ges-dur, fis-moll, Es-dur, es-moll, B-dur, Des-dur, b-moll, cis-moll | ~350 |
| **アルペジオ** | gis-moll, f-moll, As-dur, b-moll, As-dur | ~190 |
| **その他** | 練習曲、自由演奏等 | ~4 |

### 👥 演奏者分布
- **アマチュア演奏者**: 大部分
- **プロ演奏者**: 一部（比較対照用）
- **スキルレベル**: 初級〜上級まで多様

---

## 🎯 データセットの独自性と価値

### 🌟 技術的特徴
- **マルチモーダル同期**: 音声・映像・センサー・動作データの完全同期
- **高時間解像度**: 1,000Hz（1ms）の精密センサー計測
- **詳細運指解析**: 個別指の動作追跡と評価
- **自動注釈**: AIによる技術的・音楽的評価の自動生成
- **クラウド統合**: AWS S3によるスケーラブルなデータアクセス

### 🎓 研究・教育的価値
1. **演奏技術の定量化**: 従来主観的だった演奏評価の客観化
2. **学習プロセス解析**: 演奏スキル向上過程の可視化
3. **個人差の理解**: 演奏者間の技術的・表現的差異の分析
4. **リアルタイム評価**: 即座のフィードバックシステム開発

---

## 🚀 推奨研究・開発用途

### 🎹 ピアノ教育・学習支援
- **自動評価システム**: 技術的欠点の自動検出
- **パーソナライズド指導**: 個人の癖や弱点に応じた指導
- **進捗追跡**: 学習効果の定量的測定
- **運指推薦**: 最適な指使いの自動提案

### 🤖 機械学習・AI研究
- **マルチモーダル学習**: 音声・映像・センサーの統合解析
- **時系列予測**: 演奏の先読み・予測システム
- **異常検出**: 演奏ミスの自動識別
- **生成AI**: 演奏スタイルの学習と再現

### 📊 人間動作解析
- **バイオメカニクス**: 指・手・腕の動作解析
- **疲労解析**: 長時間演奏における疲労の定量化
- **技術習得過程**: 運動学習メカニズムの理解
- **個人差研究**: 体格・経験による演奏スタイルの違い

### 🎵 音楽学・音響学研究
- **演奏表現解析**: 音楽的表現の物理的基盤
- **音響学**: キータッチと音質の関係
- **音楽認知**: 演奏者の意図と実際の音響出力の関係
- **比較音楽学**: 異なる演奏スタイルの科学的比較

---

## 💻 データアクセスと技術仕様

### 🛠️ 必要技術スタック
- **Python**: pandas, numpy, librosa, opencv-python
- **音響解析**: librosa, scipy, matplotlib
- **映像解析**: OpenCV, MediaPipe
- **機械学習**: scikit-learn, TensorFlow/PyTorch
- **可視化**: matplotlib, seaborn, plotly

### 📦 データローディング例
```python
import pandas as pd
import json
import numpy as np

# 評価データの読み込み
eval_data = pd.read_csv('2024skillcheck_scale_arpeggio_unrefined_raw.csv')

# セッションメタデータの読み込み
with open('playdata/SESSION_ID/meta.json', 'r') as f:
    meta = json.load(f)

# センサーデータの読み込み
sensor_data = pd.read_csv('playdata/SESSION_ID/files/hackkey/hackkey.csv', header=None)

# 音符データの読み込み
with open('playdata/SESSION_ID/files/hackkey/note.json', 'r') as f:
    note_data = json.load(f)
```

### 🔒 データセキュリティ
- **AWS S3**: 暗号化ストレージ
- **アクセス制御**: IAM認証
- **データ整合性**: ハッシュ検証
- **バックアップ**: 冗長化ストレージ

---

## 📚 関連研究への応用

### 🎯 DDSupport手法との統合
このデータセットは、DDSupport論文で提案された言語学習支援システムの手法をピアノ演奏分野に応用する際の理想的なテストベッドとなります：

#### 🔄 手法の適応可能性
1. **豊富な無注釈データ**: 2,433セッションの大規模データセット
2. **マルチモーダル入力**: 音声・映像・センサーの多様な入力モダリティ
3. **段階的難易度**: アマチュア〜プロの演奏レベル差を活用した段階的学習
4. **リアルタイム性**: センサーデータによる即座のフィードバック実現

#### 🎼 ピアノ固有の拡張
- **運指ガイダンス**: 指使いの最適化提案
- **表現指導**: 音楽的表現力の向上支援
- **技術診断**: 演奏技術の弱点検出と改善提案
- **個別最適化**: 学習者の特性に応じたカリキュラム調整